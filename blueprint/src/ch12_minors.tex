\chapter{Graph Minors}

This chapter is organized to follow Diestel, Chapter~12 (5th ed.), in section
order and numbered statement order. For each numbered item, we either give its
Lean cross-reference or mark it as not yet formalized in this project.

\section{12.1 Well-quasi-ordering}

\begin{definition}[Diestel \S12.1]
  A quasi-ordering is a \emph{well-quasi-ordering} (WQO) if there is no
  infinite antichain and no infinite strictly descending sequence.
\end{definition}

\begin{proposition}[WQO criterion in Lean]
  \label{prop:12.1-criterion} \lean{WQO_iff} \leanok \mathlibok
  The Diestel criterion above is equivalent to the standard WQO formulation.
\end{proposition}

\begin{lemma}[Diestel Lemma~12.1.3 (Higman)]
  \label{lem:12.1.3} \lean{Higman}
  If \(X\) is WQO, then finite sequences/finite supports over \(X\) are WQO.
\end{lemma}

\section{12.2 The Graph Minor Theorem for Trees}

\begin{theorem}[Diestel Theorem~12.2.1 (Kruskal 1960)]
  \label{thm:12.2.1}
  Finite trees are well-quasi-ordered by the relevant embedding/minor order.
\end{theorem}

\begin{proof}
  Not yet formalized in this project.
\end{proof}

\section{12.3 Tree-decompositions}

\begin{definition}[Tree-decomposition]
  \label{def:12.3-tree-dec} \lean{TreeDecomposition} \leanok
  A tree-decomposition of \(G\) is a tree \(T\) with bags \(V_t \subseteq V(G)\)
  satisfying cover, edge coverage, and the bag-intersection axiom.
\end{definition}

\begin{lemma}[Diestel Lemma~12.3.1]
  \label{lem:12.3.1} \lean{TreeDecomposition.diestel_12_3_1} \leanok
  For an edge \(t_1t_2\in E(T)\), \(V_{t_1}\cap V_{t_2}\) separates the two
  induced sides of \(T-t_1t_2\).
\end{lemma}

\begin{lemma}[Diestel Lemma~12.3.2]
  \label{lem:12.3.2} \lean{TreeDecomposition.restrict} \leanok
  For every \(H \le G\), \((T,(V_t\cap V(H))_{t\in V(T)})\) is a
  tree-decomposition of \(H\).
\end{lemma}

\begin{lemma}[Diestel Lemma~12.3.3]
  \label{lem:12.3.3} \lean{TreeDecomposition.map} \leanok
  Transporting bags along contraction maps gives a decomposition of the
  contracted graph.
\end{lemma}

\begin{lemma}[Diestel Lemma~12.3.4]
  \label{lem:12.3.4}
  Every set not contained in a bag has a controlled separation property.
\end{lemma}

\begin{lemma}[Adhesion identity (cf.\ Diestel \S12.3)]
  \label{lem:12.3-adhesion} \lean{TreeDecomposition.adhesion} \leanok
  The two side regions intersect exactly in \(V_{t_1}\cap V_{t_2}\).
\end{lemma}

\begin{theorem}[Diestel Theorem~12.3.7]
  \label{thm:12.3.7}
  Existence of canonical tree-decompositions with additional adhesion/parts
  properties.
\end{theorem}

\begin{proof}
  Not yet formalized in this project.
\end{proof}

\section{12.4 Tree-width}

\begin{definition}[Diestel \S12.4]
  \label{def:12.4-width} \lean{TreeDecomposition.width} \leanok
  The width of a decomposition is \(\sup_t (|V_t|-1)\).
\end{definition}

\begin{definition}[Diestel \S12.4]
  \label{def:12.4-treewidth} \lean{treeWidth} \leanok
  \(\mathrm{tw}(G)\) is the infimum of decomposition widths.
\end{definition}

\begin{lemma}[Diestel Lemma~12.4.1]
  \label{lem:12.4.1} \lean{treeWidth_minor} \leanok \uses{def:minor}
  If \(H \preceq G\), then \(\mathrm{tw}(H)\le \mathrm{tw}(G)\).
\end{lemma}

\begin{theorem}[Diestel Theorem~12.4.2 (Robertson--Seymour 1990)]
  \label{thm:12.4.2}
  For each \(k\), graphs of tree-width at most \(k\) are WQO by minors.
\end{theorem}

\begin{theorem}[Diestel Theorem~12.4.3 (Seymour--Thomas 1993)]
  \label{thm:12.4.3}
  Tree-width duality (brambles/tangles characterization).
\end{theorem}

\begin{theorem}[Diestel Theorem~12.4.5 (Thomas 1990)]
  \label{thm:12.4.5}
  Separator/linked-structure consequence of bounded tree-width.
\end{theorem}

\begin{theorem}[Diestel Theorem~12.4.6]
  \label{thm:12.4.6}
  Excluded-minor consequence for bounded tree-width classes.
\end{theorem}

\begin{lemma}[Lean auxiliary: width under restriction]
  \label{lem:width-restrict} \lean{TreeDecomposition.width_restrict_le} \leanok
  Restricting a decomposition to a subgraph does not increase width.
\end{lemma}

\begin{lemma}[Lean auxiliary: width under contraction pushforward]
  \label{lem:width-map} \lean{TreeDecomposition.width_map_le} \leanok
  Pushing a decomposition through an adapted surjection does not increase width.
\end{lemma}

\begin{theorem}[Lean: tree case]
  \label{thm:tree-tw} \lean{tree_treeWidth} \leanok
  If \(G\) is a non-empty tree, then \(\mathrm{tw}(G)=1\).
\end{theorem}

\begin{theorem}[Lean: empty graph case]
  \label{thm:bot-tw} \lean{bot_treeWidth} \leanok
  \(\mathrm{tw}(\emptyset)=0\).
\end{theorem}

\begin{theorem}[Lean: subgraph monotonicity]
  \label{thm:tw-mono-subgraph} \lean{treeWidth_mono} \leanok
  If \(H \le G\), then \(\mathrm{tw}(H)\le \mathrm{tw}(G)\).
\end{theorem}

\begin{theorem}[Lean: contraction monotonicity]
  \label{thm:tw-mono-contract} \lean{treeWidth_contract} \leanok
  If \(G \preceq_c H\), then \(\mathrm{tw}(G)\le \mathrm{tw}(H)\).
\end{theorem}

\section{12.5 Tangles}

\begin{theorem}[Diestel Theorem~12.5.1 (Robertson--Seymour 1991)]
  \label{thm:12.5.1}
  Fundamental tree-of-tangles decomposition statement.
\end{theorem}

\begin{lemma}[Diestel Lemma~12.5.2 (Fish Lemma)]
  \label{lem:12.5.2}
  Local uncrossing/choice property for tangles.
\end{lemma}

\begin{lemma}[Diestel Lemma~12.5.3 (Splinter Lemma)]
  \label{lem:12.5.3}
  Splinter property for pairwise distinguishability of tangles.
\end{lemma}

\begin{lemma}[Diestel Lemma~12.5.4]
  \label{lem:12.5.4}
  Existence of a unique minimum-order distinguisher for tangle pairs.
\end{lemma}

\begin{lemma}[Diestel Lemma~12.5.5]
  \label{lem:12.5.5}
  Crossing-separation uncrossing relation.
\end{lemma}

\begin{lemma}[Diestel Lemma~12.5.6]
  \label{lem:12.5.6}
  Quantitative uncrossing inequality for crossing separations.
\end{lemma}

\begin{lemma}[Diestel Lemma~12.5.7]
  \label{lem:12.5.7}
  Global minimization consequence of the uncrossing inequalities.
\end{lemma}

\begin{theorem}[Diestel Theorem~12.5.8 (Carmesin--Kurkofka 2024)]
  \label{thm:12.5.8}
  Canonical decomposition distinguishing all tangles at once.
\end{theorem}

\begin{theorem}[Diestel Theorem~12.5.9 (Robertson--Seymour 1991)]
  \label{thm:12.5.9}
  Tangle duality in the finite-order setting.
\end{theorem}

\begin{lemma}[Diestel Lemma~12.5.10 (Uncrossing Lemma)]
  \label{lem:12.5.10}
  Standard uncrossing step used in tangle duality.
\end{lemma}

\begin{theorem}[Diestel Theorem~12.5.11]
  \label{thm:12.5.11}
  Equivalent formulations of tangle duality.
\end{theorem}

\begin{proof}
  Not yet formalized in this project.
\end{proof}

\section{12.6 Tree-decompositions and forbidden minors}

\begin{lemma}[Diestel Lemma~12.6.1]
  \label{lem:12.6.1}
  Characterization of graph properties by forbidden minors.
\end{lemma}

\begin{theorem}[Diestel Theorem~12.6.3 (Robertson--Seymour 1986)]
  \label{thm:12.6.3}
  Grid-minor theorem (large tree-width forces large grid minors).
\end{theorem}

\begin{theorem}[Diestel Theorem~12.6.5 (Robertson--Seymour 1986)]
  \label{thm:12.6.5}
  Erdős--Pósa-type consequence for minors.
\end{theorem}

\begin{theorem}[Diestel Theorem~12.6.6 (Robertson--Seymour 2003)]
  \label{thm:12.6.6}
  Structure theorem for graphs excluding a fixed complete-graph minor.
\end{theorem}

\begin{theorem}[Diestel Theorem~12.6.7 (Grohe--Marx 2012)]
  \label{thm:12.6.7}
  Converse/qualitative sharpening of Theorem~\ref{thm:12.6.6}.
\end{theorem}

\begin{theorem}[Diestel Theorem~12.6.8]
  \label{thm:12.6.8}
  Characterization of graphs with no \(K_{\aleph_0}\)-minor.
\end{theorem}

\begin{theorem}[Diestel Theorem~12.6.9]
  \label{thm:12.6.9}
  Equivalent formulations for connected graphs in the infinite setting.
\end{theorem}

\begin{proof}
  Not yet formalized in this project.
\end{proof}

\section{12.7 The graph minor theorem}

\begin{theorem}[Diestel Theorem~12.7.1 (Robertson--Seymour 1986--2004)]
  \label{thm:12.7.1} \lean{GraphMinorTheorem}
  Finite graphs are well-quasi-ordered by the minor relation.
\end{theorem}

\begin{lemma}[Diestel Lemma~12.7.4]
  \label{lem:12.7.4}
  Surface-dependent radius bound used in the chapter's algorithmic/structural
  corollaries.
\end{lemma}

\begin{theorem}[Planar forbidden-minor pointer]
  \label{thm:wagner} \lean{Wagner}
  \(G \preceq \mathrm{Plane} \iff K_5 \not\preceq G \land K_{3,3} \not\preceq G\).
\end{theorem}
